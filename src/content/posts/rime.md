---
title: 我的 RIME/小狼毫 輸入方案配置 2024
published: 2024-06-09
description: '我的 Rime 配置，以及定製教程記錄'
image: './covers/rime-cover.jpg'
tags: [rime, input, xhup]
category: 'Life'
draft: false 
---

## 何謂雙拼、何謂 Rime

簡單來說，雙拼是平時用的拼音輸入法的一種，是與全拼同級的概念，只不過將漢字的拼音分為聲母和韻母兩部分，並將其中需要多j鍵輸入的音節映射爲單鍵輸入。比如「拼音」，全拼需要 `pinyin` 六個按鍵，而雙拼只需要 `pbyb` 四個（in->b）。要注意的是，雙拼只是減少了擊鍵數，並沒有解決拼音輸入的重碼問題，即同音詞的存在。這方面，基於字根的五筆輸入法顯然更勝一籌，儘管它的學習門檻相對較高。

因為雙拼的映射完全是人為設定的，所以雙拼輸入法存在很多種方案。我最初接觸的是 `自然碼` 方案，它的優勢在於是廣泛兼容，一般電腦自帶的輸入法都能支持自然碼設置。  
後來，我被 `小鶴音形` 的設計理念吸引，它在雙拼的基礎上引入字形作為輔助碼，可以實現真正的盲打（輔助碼消除重碼，無需看候選詞，甚至無需看屏幕），我轉戰小鶴雙拼。但是在進階練習小鶴形碼的時候，我意識到小鶴音形的盲打很大程度是建立在對詞庫的記憶上（是的，它的詞庫是固定的），同時它的詞庫小且不可調整，我覺得難以適應就放棄了進一步學習。  
但是，基本的拆字我還是學會了的，在打單子的時候字形還是挺有用的，所以我拆出小鶴音形的單字部分，加入到搜狗拼音中，平時打字還是用 `小鶴雙拼` 。體驗不錯適合日常打字，正常和雙拼一樣，單字可以通過輔助碼快速定位。  

然而，在我習慣了這種輸入方式時，我電腦中的 `搜狗輸入法` 不知道什麼原因自己升級更新了（明明我記得我沒有打開自動更新的開關），打開設置後大量我不需要的功能（各種 AI 輔助寫作等等），廣告的煩惱、隱私的擔憂、功能的缺失，實在令我不滿。正巧，那段時候我正主瀏覽器換成了開源的 Firefox，變相為何不一併更換輸入法呢？就這樣，我轉向了 RIME。  
準確來說，`RIME` 並不是一款輸入法，它是開源的跨平臺輸入法算法框架，在各個平臺都有前端實現。有趣的一點是作者佛振爲它在不同平臺的實現起的名字，在 macOS 上的鼠須管、在 Windows 上的小狼毫，都是以毛筆命名，聽著就讓人有打字的慾望~

> 雙拼方案的對比可以看看董春秋佬的[双拼输入法介绍](https://www.chunqiujinjing.com/2024/02/06/shuangpin-input)

## 輸入方案特性

### 輸入需求

- 主力輸入法：小鶴雙拼，使用字形作為輔助碼快速定位單字。
- 偶爾需要全拼輸入，主要用於輸入首字母縮寫聯想。
- 希望 Rime 能兼任我的日語輸入法。英語輸入不是必須的，但有也是極好滴。

### 方案功能

- 雙拼輸入，後接形碼作輔助碼。例如 `jim su` 極速
- 支持臨時日文輸入和英文輸入，以 `aj` 和 `aw` 作引導詞
  - 英文輸入和正常的中文輸入，可以 `ctrl+3` 調出英漢互譯詞典
- 支持臨時全拼模式，以 `ap` 作引導詞
- 支持常見符號輸入，例如 `推特𝕏`
  - `ae` 引導詞的 emoji 搜索
  - `E` 引導搜索 emoji 總類
  - `ctrl+1` emoji 開關，開啟後不需要引導詞
- 支持漢字反查，筆畫 `ab` 引導和組件 `az` 引導兩種方式
- 支持繁簡切換 `ctrl+2`
- 其他諸如 N 引導的農曆輸入、R 引導的大寫數字、  
  V 引導的計算器、U 引導的 Unicode 輸入、/ 引導的符號輸入

### 符号习惯

|输入|输出|
|--|--|
|[]|「」|
|\|、|

### 动态输入

|输入|输出|
|--|--|
|date|2024-06-10 等格式|
|time|19:13、19:13:47|
|timestamp|1681663848|
|datetime|2024-06-10 19:14:09 等格式|
|week|星期一 等格式|
|anl|二〇二四年五月初五 等格式|
|month|June 等格式|
|uuid|90bc33bf-22b0-d61e-d65b-83e58e1d9552|

### 按鍵綁定

- 輸入方案切換使用 `Control+Shift+space`（可以切到英文和日文輸入法），  
  默認的 Control+grave 与 vscode 打開終端衝突
- Opencc 開關: `ctrl+1` emoji 開關；`ctrl+2` 繁簡開關；`ctrl+3` 中英互譯開關
- 選詞翻頁: `- =` / `[ ]` / `Control + hjkl` (vim 風格)
- 删除错误词频： `Shift+Del` （即刪除輸入過被記憶的詞組） 
- 自定義詞添加：`//` 结尾，例如输入 `高松灯` 然后输入 `tomori//` 下次部署就有词了（添加到 `custom_phrase.txt` 中）

### 包含詞庫

- 主體使用最强简体词库——[雾凇拼音](https://github.com/iDvel/rime-ice)，轉換爲雙拼形式
- 自带长句模型
- 有來自[rimerc](https://github.com/Bambooin/rimerc)和[THUOCL](https://github.com/thunlp/THUOCL)的細胞詞庫，可自行選擇開啟
- 支持自定义词典（自造词）

## RIME 配置記錄

前幾天剛更新到 `0.16.1`，多了有一些新特性，等過幾個版本穩定了再寫 (శωశ)

[CustomizationGuide](https://github.com/rime/home/wiki/CustomizationGuide)

[設定項速查手冊](https://github.com/LEOYoon-Tsaw/Rime_collections/blob/master/Rime_description.md)

[RIME 输入法方案配置手册 | 西山晴雪](https://xishansnow.github.io/posts/41ac964d)

### 重新部署的操作方法

右鍵點選托盤圖標「重新部署」，修改配置之後務必重新部署生效配置

### 用戶目錄結構

- `default.yaml`: 輸入法的全局設定
- `xx.dict.yaml`: 輸入方案的詞典文件
- `xx.schema.yaml`: 輸入方案的配置文件
- `symbols.yaml`: 按鍵符號，比如按 `[]` 輸出 `「」`
- `rime.lua`: 管理 lua 腳本的統一入口
- `lua/`: 存放 lua 腳本的目錄
- `opencc/`: 用於字符轉換的，比如簡繁映射、emoji映射
- `weasel.yaml`: 樣式設置文件

### speller 演算規則

```
xform --改写〔不保留原形〕
derive --衍生〔保留原形〕
abbrev --简拼〔出字优先级较上两组更低〕
fuzz --畧拼〔此种简拼仅组词，不出单字〕
xlit --变换〔适合大量一对一变换〕
erase --删除
```

